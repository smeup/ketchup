<!DOCTYPE html>
<html dir="ltr" lang="en">
    <head>
        <meta charset="utf-8" />

        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0"
        />

        <title>Ketchup planner (example 7)</title>

        <script type="module" src="/build/ketchup.esm.js"></script>
        <script nomodule src="/build/ketchup.js"></script>
        <style>
            html {
                background-color: var(--kup-background-color);
                color: var(--kup-text-color);
                font-family: var(--kup-font-family);
                font-size: var(--kup-font-size);
                padding: 1rem;
            }

            #dropdown {
                padding-top: 40px;
                padding-left: 11px;
            }
        </style>
    </head>

    <body>
        <script>
            document.documentElement['ketchupInit'] = {
                debug: { active: true, logLimit: 20000 },
                autoSetLocalization: true,
            };
        </script>
        <kup-planner id="planner"></kup-planner>
        <kup-button
            label="Unmount"
            style="position: fixed; bottom: 10px; right: 5px; z-index: 1000"
            styling="floating"
        ></kup-button>
    </body>
    <script src="/assets/planner-example-7.js"></script>
    <script>
        // Auto-smoke-test: attempt to invoke comp.addPhases('CM1', phases)
        // after the assets script attaches data. This is non-invasive and
        // only runs in the example page to produce reproducible console logs
        // for verification.
        (function () {
            function tryInvoke() {
                const comp = document.getElementById('planner');
                if (!comp) {
                    setTimeout(tryInvoke, 500);
                    return;
                }
                if (typeof comp.addPhases !== 'function') {
                    setTimeout(tryInvoke, 500);
                    return;
                }
                if (typeof phases === 'undefined') {
                    setTimeout(tryInvoke, 500);
                    return;
                }
                console.log(
                    'planner-example-7: auto-invoking addPhases for CM1'
                );
                try {
                    comp.addPhases('CM1', phases);
                } catch (e) {
                    console.error(
                        'planner-example-7: addPhases invocation failed',
                        e
                    );
                }
            }

            // give the page a moment to initialize
            setTimeout(tryInvoke, 1000);
        })();
    </script>
</html>
