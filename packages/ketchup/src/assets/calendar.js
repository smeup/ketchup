const data = {
    columns: [
        {
            name: 'date',
            title: 'Date',
        },
        {
            name: 'descr',
            title: 'Description',
        },
        {
            name: 'start',
            title: 'Start',
        },
        {
            name: 'end',
            title: 'End',
        },
        {
            name: 'icon',
            title: 'Icon',
        },
        {
            name: 'image',
            title: 'Image',
        },
        {
            name: 'style',
            title: 'Style',
        },
    ],
    rows: [
        {
            cells: {
                date: {
                    obj: {
                        t: 'D8',
                        p: '*YYMD',
                        k: '20210919',
                    },
                    value: '2021-09-19',
                },
                descr: {
                    obj: {
                        t: '',
                        p: '',
                        k: '',
                    },
                    value: 'Dentist',
                },
                start: {
                    obj: {
                        t: '',
                        p: '',
                        k: '',
                    },
                    value: '10:00:00',
                },
                end: {
                    obj: {
                        t: '',
                        p: '',
                        k: '',
                    },
                    value: '11:00:00',
                },
                icon: {
                    obj: {
                        t: 'J4',
                        p: 'ICO',
                        k: '...',
                    },
                    value: 'widgets;menu',
                },
                image: {
                    obj: {
                        t: 'J4',
                        p: 'IMG',
                        k: '...',
                    },
                    value: 'https://via.placeholder.com/64?text=PF;https://via.placeholder.com/64?text=CF;https://via.placeholder.com/64?text=DG',
                },
                style: {
                    obj: {
                        t: '',
                        p: '',
                        k: '...',
                    },
                    value: '',
                    style: {
                        background: 'purple',
                        color: 'yellow',
                    },
                },
            },
        },
        {
            cells: {
                date: {
                    obj: {
                        t: 'D8',
                        p: '*YYMD',
                        k: '20210917',
                    },
                    value: '2021-09-17',
                },
                descr: {
                    obj: {
                        t: '',
                        p: '',
                        k: '',
                    },
                    value: 'Cinema',
                },
                start: {
                    obj: {
                        t: '',
                        p: '',
                        k: '',
                    },
                    value: '21:00:00',
                },
                end: {
                    obj: {
                        t: '',
                        p: '',
                        k: '',
                    },
                    value: '23:00:00',
                },
                icon: {
                    obj: {
                        t: 'J4',
                        p: 'ICO',
                        k: '...',
                    },
                    value: 'wrench',
                },
                image: {
                    obj: {
                        t: 'J4',
                        p: 'IMG',
                        k: '...',
                    },
                    value: 'https://via.placeholder.com/64?text=PF;https://via.placeholder.com/64?text=CF;https://via.placeholder.com/64?text=DG',
                },
                style: {
                    obj: {
                        t: '',
                        p: '',
                        k: '...',
                    },
                    value: '',
                    style: {
                        background: 'purple',
                        color: 'yellow',
                    },
                },
            },
        },
    ],
};

const calendarColumnsData = {
    columns: [
        {
            name: 'col1',
            title: 'Date',
        },
        {
            name: 'col2',
            title: 'Description',
        },
        {
            name: 'col3',
            title: 'Start',
        },
        {
            name: 'col4',
            title: 'End',
        },
        {
            name: 'col5',
            title: 'Icon',
        },
        {
            name: 'col6',
            title: 'Image',
        },
        {
            name: 'col7',
            title: 'Style',
        },
    ],
    rows: [
        {
            cells: {
                col1: {
                    obj: {
                        t: 'D8',
                        p: '*YYMD',
                        k: '20210919',
                    },
                    value: '2021-09-19',
                },
                col2: {
                    obj: {
                        t: '',
                        p: '',
                        k: '',
                    },
                    value: 'Dentist',
                },
                col3: {
                    obj: {
                        t: '',
                        p: '',
                        k: '',
                    },
                    value: '10:00:00',
                },
                col4: {
                    obj: {
                        t: '',
                        p: '',
                        k: '',
                    },
                    value: '11:00:00',
                },
                col5: {
                    obj: {
                        t: 'J4',
                        p: 'ICO',
                        k: '...',
                    },
                    value: 'widgets;menu',
                },
                col6: {
                    obj: {
                        t: 'J4',
                        p: 'IMG',
                        k: '...',
                    },
                    value: 'https://via.placeholder.com/64?text=PF;https://via.placeholder.com/64?text=CF;https://via.placeholder.com/64?text=DG',
                },
                col7: {
                    obj: {
                        t: '',
                        p: '',
                        k: '...',
                    },
                    value: '',
                    style: {
                        background: 'purple',
                        color: 'yellow',
                    },
                },
            },
        },
        {
            cells: {
                col1: {
                    obj: {
                        t: 'D8',
                        p: '*YYMD',
                        k: '20210917',
                    },
                    value: '2021-09-17',
                },
                col2: {
                    obj: {
                        t: '',
                        p: '',
                        k: '',
                    },
                    value: 'Cinema',
                },
                col3: {
                    obj: {
                        t: '',
                        p: '',
                        k: '',
                    },
                    value: '21:00:00',
                },
                col4: {
                    obj: {
                        t: '',
                        p: '',
                        k: '',
                    },
                    value: '23:00:00',
                },
                col5: {
                    obj: {
                        t: 'J4',
                        p: 'ICO',
                        k: '...',
                    },
                    value: 'wrench',
                },
                col6: {
                    obj: {
                        t: 'J4',
                        p: 'IMG',
                        k: '...',
                    },
                    value: 'https://via.placeholder.com/64?text=PF;https://via.placeholder.com/64?text=CF;https://via.placeholder.com/64?text=DG',
                },
                col7: {
                    obj: {
                        t: '',
                        p: '',
                        k: '...',
                    },
                    value: '',
                    style: {
                        background: 'purple',
                        color: 'yellow',
                    },
                },
            },
        },
    ],
};

const callback = (e) => {
    console.log(e);
};

const calendars = document.querySelectorAll('kup-calendar');
for (let index = 0; index < calendars.length; index++) {
    const calendar = calendars[index];
    if(calendar.id === 'with-custom-columns') {
        calendar.data = { columns: [...calendarColumnsData.columns], rows: calendarColumnsData.rows };
        calendar.calendarColumns = {
            date: 'col1',
            descr: 'col2',
            end: 'col4',
            icon: '',
            image: '',
            start: 'col3',
            style: 'col7',
        };
    } else {
        calendar.data = { columns: [...data.columns], rows: data.rows };
        calendar.calendarColumns = {
            date: 'date',
            descr: 'descr'
        };
    }

    const dateCol = calendar.data.columns.find((col) => col.name === calendar.calendarColumns.date);
    const descrCol = calendar.data.columns.find((col) => col.name === calendar.calendarColumns.descr);
    const endCol = calendar.data.columns.find((col) => col.name === calendar.calendarColumns.end);
    const iconCol = calendar.data.columns.find((col) => col.name === calendar.calendarColumns.icon);
    const imageCol = calendar.data.columns.find((col) => col.name === calendar.calendarColumns.image);
    const startCol = calendar.data.columns.find((col) => col.name === calendar.calendarColumns.start);
    const styleCol = calendar.data.columns.find((col) => col.name === calendar.calendarColumns.style);

    calendar.data.columns[calendar.data.columns.indexOf(dateCol)] = dateCol
    calendar.data.columns[calendar.data.columns.indexOf(descrCol)] = descrCol
    switch (calendar.id) {
        case 'week-view':
            calendar.data.columns[calendar.data.columns.indexOf(endCol)] = endCol
            calendar.data.columns[calendar.data.columns.indexOf(startCol)] = startCol
            calendar.calendarColumns = {
                ...calendar.calendarColumns,
                start: 'start',
                end: 'end',
            }
            break;
        case 'with-icon':
            calendar.data.columns[calendar.data.columns.indexOf(iconCol)] = iconCol
            calendar.calendarColumns = {
                ...calendar.calendarColumns,
                icon: 'icon',
            }
            break;
        case 'with-images':
            calendar.data.columns[calendar.data.columns.indexOf(imageCol)] = imageCol
            calendar.calendarColumns = {
                ...calendar.calendarColumns,
                image: 'image',
            }
            break;
        case 'with-style':
            calendar.data.columns[calendar.data.columns.indexOf(styleCol)] = styleCol
            calendar.calendarColumns = {
                ...calendar.calendarColumns,
                style: 'style',
            }
            break;
        case 'with-custom-columns':
            calendar.data.columns[calendar.data.columns.indexOf(endCol)] = endCol
            calendar.data.columns[calendar.data.columns.indexOf(startCol)] = startCol
            calendar.data.columns[calendar.data.columns.indexOf(styleCol)] = styleCol
    }

    calendar.addEventListener('kup-calendar-dateclick', callback);
    calendar.addEventListener('kup-calendar-eventclick', callback);
    calendar.addEventListener('kup-calendar-eventdrop', callback);
    calendar.addEventListener('kup-calendar-viewchange', callback);
}
